\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}
\usepackage[top=1cm, bottom=1.5cm, left=2cm, right=2cm]{geometry}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{titlesec}

\title{Rapport \\ \og Cloud privé avec OpenStack \fg}
\author{Julien Brun, Maxime Mouchet \\ Fréderic Pourraz (tuteur)}
\date{RT2 2012-13}

\titleformat{\chapter}[hang]{\bf\huge}{\thechapter}{2pc}{}

\begin{document}

\begin{figure}
\includegraphics[width=5cm]{images/iut.png}\hfill
\includegraphics[width=5.5cm]{images/rt.png}
\end{figure}

\maketitle

\clearpage
\thispagestyle{empty}
\null\newpage

\chapter*{Remerciements}
\thispagestyle{empty}
Nous remercions M. Frédéric Pourraz pour nous avoir permis de réaliser ce projet.\newline
Nous remercions M. Gaëtan Ferez pour nous avoir mis à disposition le matériel et son aide sur celui-ci.

De manière générale nous remercions tout les professeurs pour leurs enseignements durant ces deux années de DUT.

\renewcommand{\contentsname}{Sommaire}
\tableofcontents

\chapter{Introduction}
\section{Choix du sujet}
La virtualisation et le Cloud Computing sont des solutions d'avenir pour les entreprises grâce à des coûts réduits et une maintenance simplifiée. Nous trouvons ces technologies passionnantes et mettre en place un Cloud Privé nous permet de les aborder tout en approfondissant les thématiques étudiées durant notre formation.

\section{Contexte}
\subsection{La virtualisation}
Le principe de base de la virtualisation est de permettre le fonctionnement de plusieurs système d’exploitations (Windows, Linux, …) en simultané sur un ordinateur.
Les intérêts sont multiples, on peut citer principalement :\newline

Augmenter la disponibilité grâce à une redondance et réduire les coûts. Par exemple on peut imaginer avoir deux serveurs mails sur une même machine physique et utiliser l’un ou l’autre en fonction de leur charge ou en cas de panne. On réduit par la même occasion les coûts puisqu’on n’utilisera qu’une seule machine physique pour ces deux serveurs.

Un dimensionnement plus facile. La virtualisation ajoutant une couche d’abstraction entre le système d’exploitation (logiciel) et le matériel (ordinateur) on peut aisément augmenter la puissance de calcul en ajoutant, par exemple, de la mémoire sur un ordinateur sans impacter le fonctionnement des systèmes virtuels.

Faciliter les migrations site-à-site. Il est beaucoup plus facile de transférer un serveur d’un site physique à un autre en transférant une image virtuelle par le réseau plutôt qu’en transportant un serveur physique.\newline

Il existe plusieurs logiciels permettant de virtualiser des systèmes, parmis les plus connus on pourra citer VMWare ESX ou VirtualBox.

\subsection{Le Cloud Computing}
Ces logiciels conviennent à la virtuatisation de quelques machines mais pas à la gestion global d'une infrastructure, ils se contentent de faire fonctionner plusieurs systèmes d’exploitations sur un seul ordinateur. Ils ne permettent pas d'utiliser des ressources et du stockage présents sur plusieurs ordinateurs depuis un lieu distant et par plusieurs personnes.

On va alors regrouper toutes ces ressources (stockage, ordinateurs, logiciels de virtualisation) via un réseau. On parle de Cloud Computing et plus précisément\footnotemark[1] dans ce cas là d’IaaS (Infrastructure as a Service).
L’utilisateur final ne se préoccupe pas de savoir où est physiquement le stockage ou les ordinateurs qui possèdent le logiciel de virtualisation, ni comment ils sont reliés entre eux. Il indique juste au cloud qu’il souhaite tant de machines avec tel système d’exploitation.

\footnotetext[1]{Pour simplifier nous avons concentré notre explication sur la virtualisation de bas-niveau (systèmes d’exploitations), mais il existe des niveaux d’abstractions supplémentaires comme la virtualisation d’applications. Dans le cas du Cloud Computing (ressource partagés par le réseau) on parlera de PaaS (Platform as a Service) ou de SaaS (Software as a service).}

\newpage
\subsection{Panorama des IaaS}
\subsubsection{Amazon EC2}
\subsubsection{CloudStack}
\subsubsection{OpenStack}


\chapter{Matériel}

\section{Serveur dédié OVH}
Nous avons réalisé la première partie de notre projet sur un serveur dédié Kimsufi d'OVH. Il était équipé d'un processeur 64 bits à 3,4Ghz avec les extensions VT-x (Intel Core i3), de 8Go de RAM, et de 2x1To de stockage en RAID 0.

Il s'agit de la configuration minimale pour faire fonctionner une installation de développement d'OpenStack.

\section{BladeCenter HP}
Une fois notre projet fonctionnel sur le serveur dédié nous avons déployé une nouvelle installation d'OpenStack sur quatre lames du BladeCenter dont dispose notre département au sein de l'IUT.

La configuration est cette fois-ci beaucoup plus intéressante et permet d'entrevoir les réelles possibilités du Cloud Computing.

\subsection{Configuration matérielle}
Nous disposions de trois lames équipés chacune de deux processeurs AMD Opteron 250 (2,4GHz / 64 bits) et de 4Go de RAM, ainsi que d'une lame équipé de deux Opteron 275 (2,2GHz / 64 bits) et de 8Go de RAM.\newline
Toutes les lames possèdent une carte Fibre Channel QLogic Q2312 pour le stockage.

\subsection{Stockage}
Les lames ne disposant pas de stockage intégré, ce dernier est assuré pas un SAN HP StorageWorks relié en FC.

\subsection{Réseau}
Chaque lame possède deux liens à 1Gbit/s que nous avons agrégés afin d'obtenir une bande passante de 2Gbit/s entre elles. Sauf sur une lame, faisant office de Routeur/NAT, connecté à 1Gbit/s au réseau de l'IUT et à 1Gbit/s aux autres lames.

\chapter{Logiciels}
\section{OpenStack}
Parmis ces différents solutions nous avons choisi d’utiliser OpenStack car c’est un projet Open source (le code source est disponibles gratuitement sur Internet) très actif.
Il peut être considérée comme mature pour une utilisation en production car il est utilisé entre autre par Rackspace (un très gros hébergeur et fournisseur de solutions de Cloud Computing Américain), la NASA, et Intel.

\subsection{La fondation OpenStack}


\subsection{Les services}
OpenStack est constitué de différents services gérant chacun une composante spécifique de l'IaaS.
\subsubsection{Keystone}
Ce service est indispensable, il permet de coordonnée l'authentification et l'accès aux autres services.

\subsubsection{Nova}
C'est le service qui va gérer les systèmes de virtualisation (KVM, Xen, ...). Il est chargé de créer/démarrer/arrêter les machines, et de gérer les ressources physiques qui leurs sont allouées, ainsi que le stockage bloc\footnotemark[2].

\subsubsection{Swift}
Swift est le système de stockage objet\footnotemark[3] d'OpenStack. Il gère toutes spécificités de ce type de stockage (voir note de bas de page).

\subsubsection{Glance}
Glance s'occupe des images virtuelles\footnotemark[4]. Il enregistre leur caractéristiques et leur emplacements de façon à ce que les autres services n'aient pas à s'en occuper.

\subsubsection{Dashboard}
C'est l'interface graphique qui permet à l'utilisateur final de gérer ses instances virtuelles.

\footnotetext[2]{Le stockage bloc permet aux machines virtuelles de disposer d'un stockage à haute performance. Originellement ce système de stockage est inclus dans Nova mais depuis la version Folsom il s'agit d'un service séparé: Cinder.}
\footnotetext[3]{Le stockage objet permet de stocker des données statiques (images virtuelles, photos, emails, sauvegardes, ...) de façon redondante et sécurisé, au prix de performances moindres.}
\footnotetext[4]{Une image est le modèle d'après lequel serons créer les machines.}

\section{Puppet}
Une fois la ou les machines virtualisées, il faut les configurer et installer des applications. On peut effectuer ces tâches à la main mais il existe des solutions libre comme Puppet, Chef ou encore CfEngine qui permettent d'automatiser ces configurations et de les appliquer simultanément sur plusieurs machines. Nous utiliserons Puppet car elle possède une communauté très active et la syntaxe de ses scripts de configuration nous semble la plus clair.

\section{Apache///Reverse Proxy}
Parler de Varnish


\chapter{Systèmes d'exploitations hôtes}
\section{Ubuntu Server}

\section{CentOS}

\section{Solaris}

\subsection{Les zones}



\chapter{Mise en place}
\section{OVH....}

\section{Déploiement sur un BladeCenter}
\subsection{Installation des systèmes}

\subsubsection{Configuration du stockage}
Parlr du multipath etc..

\subsubsection{Configuration du réseau}

\subsubsection{Environnement de travail}

\subsection{Installation des zones}

\subsection{Mise en place d'OpenStack}
\subsubsection{Préliminaires}

\subsubsection{Installation du service d'identité}

\subsubsection{Installation du service d'images}

\chapter{Problèmes rencontrés}

\appendix

\chapter{Fichiers de configuration OpenStack}
\section{Keystone}
\subsection{keystone.conf}

\section{Glance}

\section{Swift}

\section{Nova}

\chapter{Fichiers de configuration Solaris}
\section{NAT}
\subsection{ipf.conf}

\chapter{Recettes Puppet}



\end{document}
